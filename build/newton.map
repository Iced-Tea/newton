{"version":3,"sources":["webpack/bootstrap dbc12e949f523b8beed4","./index.js","./lib/accumulator.js","./lib/frame.js","./lib/simulator.js","./lib/renderer.js","./lib/renderers/gl-renderer.js","./lib/vector.js","./lib/particle.js"],"names":[],"mappings":";;;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,uBAAa;AACb;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;;AAGA;AACA,wC;;;;;;;;;;ACvCA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;ACLA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;;;;;;;;;AC5BA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,2DAA0D;AAC1D;AACA;;AAEA,oBAAmB,qDAAqD;AACxE;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,qCAAoC,kCAAkC,EAAE;AACxE;AACA;AACA;;AAEA;AACA;AACA;AACA;;;;;;;;;;AC9CA;AACA;;AAEA;AACA;;AAEA;AACA,kCAAiC;AACjC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;;;;;;;;;ACtCA;;AAEA;;AAEA;AACA;AACA;;AAEA;;;;;;;;;;ACRA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;;;;;;;;;ACdA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;;ACNA;;AAEA;AACA;AACA;AACA;;AAEA","sourcesContent":["\n// The module cache\nvar installedModules = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(installedModules[moduleId])\n\t\treturn installedModules[moduleId].exports;\n\t\n\t// Create a new module (and put it into the cache)\n\tvar module = installedModules[moduleId] = {\n\t\texports: {},\n\t\tid: moduleId,\n\t\tloaded: false\n\t};\n\t\n\t// Execute the module function\n\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\t\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\t\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = modules;\n\n// expose the module cache\n__webpack_require__.c = installedModules;\n\n// __webpack_public_path__\n__webpack_require__.p = \"\";\n\n\n// Load entry module and return exports\nreturn __webpack_require__(0);","module.exports = {\n  Simulator: require('./lib/simulator'),\n  GLRenderer: require('./lib/renderers/gl-renderer'),\n  Particle: require('./lib/particle'),\n  Vector: require('./lib/vector')\n};\n","function Accumulator(interval, max) {\n  this._interval = interval;\n  this._max = max;\n  this._total = 0;\n  this._lastTime = 0;\n  this._startTime = Date.now();\n}\n\nAccumulator.prototype.freeze = function() {\n  this._time = Date.now();\n  this._buffer = this._time - this._lastTime;\n  this._lastTime = this._time;\n\n  return this._interval;\n};\n\nAccumulator.prototype.next = function() {\n  if (this._buffer > this._max) {\n    this._buffer = 0;\n    return false;\n  }\n  if (this._buffer < this._interval) return false;\n\n  this._total += this._interval;\n  this._buffer -= this._interval;\n  return this._total;\n};\n\nmodule.exports = Accumulator;\n","module.exports = getFrame();\n\nfunction getFrame() {\n  var lastTime = 0;\n\n  // Browsers\n  if (typeof window !== 'undefined') {\n    var vendors = ['ms', 'moz', 'webkit', 'o'];\n    var isOpera = !!window.opera || navigator.userAgent.indexOf(' OPR/') >= 0;\n    var isFirefox = typeof InstallTrigger !== 'undefined';   // Firefox 1.0+\n    var isSafari = Object.prototype.toString.call(window.HTMLElement).indexOf('Constructor') > 0;\n    var isChrome = !!window.chrome && !isOpera;\n\n    for (var x = 0; x < vendors.length && !window.requestAnimationFrame; ++x) {\n      window.requestAnimationFrame = window[vendors[x]+'RequestAnimationFrame'];\n      window.cancelAnimationFrame = window[vendors[x]+'CancelAnimationFrame'] || window[vendors[x]+'CancelRequestAnimationFrame'];\n    }\n\n    if (!window.requestAnimationFrame) {\n      window.requestAnimationFrame = timeoutFrame;\n      window.cancelAnimationFrame = cancelTimeoutFrame;\n    }\n\n    return {\n      onFrame: window.requestAnimationFrame.bind(window),\n      cancelFrame: window.cancelAnimationFrame.bind(window)\n    };\n  }\n\n  // Node\n  return {\n    onFrame: timeoutFrame,\n    cancelFrame: cancelTimeoutFrame\n  };\n\n  function timeoutFrame(simulator, element) {\n    var currTime = new Date().getTime();\n    var timeToCall = Math.max(0, 16 - (currTime - lastTime));\n    var id = setTimeout(function() { simulator(currTime + timeToCall); }, timeToCall);\n    lastTime = currTime + timeToCall;\n    return id;\n  }\n\n  function cancelTimeoutFrame(id) {\n    clearTimeout(id);\n  }\n}\n","var onFrame = require('./frame').onFrame;\nvar Accumulator = require('./accumulator');\n\nfunction Simulator() {\n  if (!(this instanceof Simulator)) return new Simulator();\n\n  this._step = this._step.bind(this);\n  this._stepInterval = 1000 / 60;     // TODO: option\n  this._running = false;\n  this._accumulator = undefined;\n}\n\nSimulator.prototype.start = function() {\n  this._running = true;\n  this._accumulator = new Accumulator(this._stepInterval, 100);\n  onFrame(this._step);\n};\n\nSimulator.prototype.add = function(entity) {\n  // TODO\n};\n\nSimulator.prototype._step = function() {\n  if (!this._running) return;\n\n  var time;\n  var interval = this._accumulator.freeze();\n  while (time = this._accumulator.next()) {\n    this._simulate(interval, time);\n  }\n\n  onFrame(this._step);\n};\n\nSimulator.prototype._simulate = function(time, totalTime) {\n\n};\n\nmodule.exports = Simulator;\n","function Renderer() {\n\n}\n\nRenderer.prototype.render = function(sim) {\n  this._sim = sim;\n};\n\nmodule.exports = Renderer;\n","var Renderer = require('../renderer');\n\nfunction GLRenderer(el) {\n  if (!(this instanceof GLRenderer)) return new GLRenderer(el);\n  this._el = el;\n  this._sim = undefined;\n}\n\nGLRenderer.prototype = Object.create(Renderer.prototype);\n\nGLRenderer.prototype.render = function(sim) {\n  this._sim = sim;\n};\n\nmodule.exports = GLRenderer;\n","function Vector(x, y) {\n  if (!(this instanceof Vector)) return new Vector(x, y);\n  this.x = x;\n  this.y = y;\n}\n\nmodule.exports = Vector;\n","var Vector = require('./vector');\n\nfunction Particle(x, y, size) {\n  if (!(this instanceof Particle)) return new Particle(x, y, size);\n  this.position = Vector(x, y);\n}\n\nmodule.exports = Particle;\n"],"sourceRoot":"webpack-module://"}